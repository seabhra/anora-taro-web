<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#6b46c1">
<link rel="apple-touch-icon" href="/icons/icon-192.png">
<title>Anora Tar√¥</title>

<style>
body {
margin: 0;
padding: 20px;
font-family: Arial, Helvetica, sans-serif;
background: #f7f7f7;
text-align: center;
}

.cards {
display: flex;
justify-content: center;
gap: 12px;
margin-bottom: 24px;
}

.card { width: 90px; }

.card img {
width: 100%;
border-radius: 10px;
box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}


.flors {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 16px 0;
}

.flor {
  width: 70px;
  height: auto;
}

.flor img {
  width: 100%;
  height: auto;
  display: block;
  box-shadow: none;
  border-radius: 0;
  background: transparent;
}

  
.label {
margin-top: 6px;
font-size: 13px;
font-weight: bold;
}

.card-name {
font-size: 11px;
color: #6b46c1;
min-height: 14px;
}

.action-button {
width: 100%;
max-width: 320px;
height: 50px;
border: none;
border-radius: 4px;
font-size: 18px;
font-weight: bold;
color: #fff;
cursor: pointer;
}

.pink { background:#fd98be; }
.blue { background:#98e6ce; }

/* Estilo marca anora na mensagem compartilhada */
  
  .ai-title {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

/* Shape arredondado */
.ai-logo {
  width: 26px;
  height: 26px;
  padding: 6px;
  background: #f3e8ff;           /* lil√°s suave */
  border-radius: 50%;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}


  
/* Estilo padr√£o do status */
#status {
margin-top: 16px;
font-weight: bold;
color: #718096;
transition: color 0.3s ease;
}

/* Classes para as cores do status */
#status.status-loading {
color: #6b46c1; /* Roxo */
}

#status.status-success {
color: #38a169; /* Verde */
}

#status.status-error {
color: #3182ce; /* Azul */
}

/* Loader da API */
#loader {
display: none;
margin: 20px auto;
width: 50px;
height: 50px;
border: 5px solid rgba(131, 242, 212, 0.2);
border-top: 5px solid #83f2d4;
border-radius: 50%;
animation: spin 1s linear infinite;
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

/* Loader da p√°gina */
#pageLoader {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: #f7f7f7;
display: flex;
justify-content: center;
align-items: center;
z-index: 9999;
opacity: 1;
transition: opacity 0.5s ease-out;
}

#pageLoader.hidden {
opacity: 0;
pointer-events: none;
}

.page-spinner {
width: 60px;
height: 60px;
border: 6px solid rgba(131, 242, 212, 0.3);
border-top: 6px solid #83f2d4;
border-radius: 50%;
animation: spin 1s linear infinite;
}

/* ESTILO DA CAIXA DE RESPOSTA DA IA */
#aiResponse {
display: none;
margin-top: 16px;
padding: 14px;
background: #fff;
border-radius: 12px;
font-size: 14px;
text-align: left;
}

/* ESTILO DO NOVO CABE√áALHO H2 */
#aiResponse h2 {
text-align: center;
color: #6b46c1;
margin-top: 0;
margin-bottom: 16px;
font-size: 18px;
font-weight: bold;
}

/* >>> MUDAN√áA AQUI: Estilo do par√°grafo com espa√ßamento <<< */
#aiResponse p {
line-height: 1.6;
margin: 0; /* Reseta a margem */
}

/* Adiciona espa√ßo apenas ENTRE os par√°grafos (a partir do segundo) */
#aiResponse p:not(:first-child) {
margin-top: 1em;
}

/* ESTILO PARA OS T√çTULOS DENTRO DA AN√ÅLISE */
#aiResponse p strong {
color: #6b46c1;
display: block;
margin-top: 18px;
margin-bottom: 8px;
font-size: 15px;
}

 /* ESTILO PARA BOT√ÉO WHATSAPP */

#shareButton {
display: none;
width: 100%;
max-width: 320px;
height: 45px;
margin: 12px auto 0;
border: none;
border-radius: 8px;
font-size: 16px;
font-weight: bold;
color: #fff;
background-color: #25D366;
cursor: pointer;
transition: background-color 0.2s ease;
}

#shareButton:hover {
background-color: #128C7E;
}


</style>
</head>

<body>

<!-- Loader da p√°gina -->
<div id="pageLoader">
<div class="page-spinner"></div>
</div>

<div class="cards">
<div class="card">
<img id="card1" src="cards_images/back.jpg">
<div class="label">Passado</div>
<div class="card-name" id="name1"></div>
</div>
<div class="card">
<img id="card2" src="cards_images/back.jpg">
<div class="label">Presente</div>
<div class="card-name" id="name2"></div>
</div>
<div class="card">
<img id="card3" src="cards_images/back.jpg">
<div class="label">Futuro</div>
<div class="card-name" id="name3"></div>
</div>
</div>

<button id="actionButton" class="action-button pink">
Embaralhar Cartas
</button>

<div id="status">Aguardando sua consulta</div>
 
<div class="flors" id="florBox">
  <div class="flor">
    <img src="cards_images/liz.png" alt="Flor simb√≥lica">
  </div>
</div>
 
<div id="loader"></div>
<div id="promptBox"></div>

<!-- CAIXA DE RESPOSTA DA IA -->
<div id="aiResponse">
<!-- O conte√∫do ser√° inserido aqui pelo JavaScript -->
</div>

<button id="shareButton">Compartilhar no WhatsApp</button>
 
<script>
const basePath = 'cards_images/';
const backCard = basePath + 'back.jpg';

const cards = [
{ label:'Louco', file:'01_Louco' },
{ label:'Mago', file:'02_Mago' },
{ label:'Sacerdotisa', file:'03_Sacerdotisa' },
{ label:'Imperatriz', file:'04_Imperatriz' },
{ label:'Imperador', file:'05_Imperador' },
{ label:'Sacerdote', file:'06_Sacerdote' },
{ label:'Amantes', file:'07_Amantes' },
{ label:'Carro', file:'08_Carro' },
{ label:'For√ßa', file:'09_Forca' },
{ label:'Eremita', file:'10_Eremita' },
{ label:'Roda da Fortuna', file:'11_Roda' },
{ label:'Justi√ßa', file:'12_Justica' },
{ label:'Enforcado', file:'13_Enforcado' },
{ label:'Morte', file:'14_Morte' },
{ label:'Temperan√ßa', file:'15_Temperanca' },
{ label:'Diabo', file:'16_Diabo' },
{ label:'Torre', file:'17_Torre' },
{ label:'Estrela', file:'18_Estrela' },
{ label:'Lua', file:'19_Lua' },
{ label:'Sol', file:'20_Sol' },
{ label:'Julgamento', file:'21_Julgamento' },
{ label:'Mundo', file:'22_Mundo' }
];


const imgs = [
card1 = document.getElementById('card1'),
card2 = document.getElementById('card2'),
card3 = document.getElementById('card3')
];

const labels = [
name1 = document.getElementById('name1'),
name2 = document.getElementById('name2'),
name3 = document.getElementById('name3')
];

const button = document.getElementById('actionButton');
const status = document.getElementById('status');
const loader = document.getElementById('loader');
const aiBox = document.getElementById('aiResponse');
const promptBox = document.getElementById('promptBox');
const shareButton = document.getElementById('shareButton');

let hasReading = false;

function shuffle(arr) {
return arr.sort(() => Math.random() - 0.5);
}



<!-- FUN√á√ÉO EMBARALHAR CARTAS -->
  function newReading() {
  // 1. Em vez de embaralhar, primeiro, fa√ßa as cartas girar por 2 segundos.
  // Isso d√° tempo para o usu√°rio ver as cartas se movem antes da an√°lise aparecer.
  
  // 2. Em seguida, mostre as cartas na posi√ß√£o final.
  // 3. Depois do tempo, as cartas se movem para a posi√ß√£o final.
  
  // 4. S√≥ ent√£o, a an√°lise da IA √© exibida.
  
  // 5. Por fim, o bot√£o de "Nova Consulta" volta a ser "Embaralhar Cartas".

  // 1. Inicia o efeito de girar as cartas
  cards.forEach((card, i) => {
    imgs[i].src = `${basePath}${card.file}.jpg`;
    labels[i].innerText = card.label;
  });

  // 2. Inicia o temporizador para girar as cartas por 2 segundos.
  setTimeout(() => {
    // 2. Ap√≥s 2 segundos, as cartas come√ßar a girar.
  }, 2000); // 2000 milisegundos = 2 segundos.

  // 3. Depois que o tempo acabar, as cartas se movem para a posi√ß√£o final.
  setTimeout(() => {
    // 3. Mova as cartas para a posi√ß√£o final.
    shuffled.forEach((card, i) => {
      const finalPosition = card.element.getBoundingClientRect(); // Pega a posi√ß√£o atual da carta
      const finalPosition = {
        x: finalPosition.x,
        y: finalPosition.y
      };
      
      // Anima√ß√£o suave da posi√ß√£o inicial
      const initialPosition = {
        x: finalPosition.x - 100, // Move a carta 100px para a esquerda.
        y: finalPosition.y + 100; // Move a carta 100px para baixo.
      
      // Move a carta para a posi√ß√£o final
      card.element.style.transform = `translate(${finalPosition.x}px, ${finalPosition.y}px)`;
    });
  }, 2000); // 2000 milisegundos = 2 segundos

  // 4. Mostra o loader e a an√°lise.
  loader.style.display = 'block';
  aiBox.style.display = 'flip' para o loader girar, mas n√£o mostra a an√°lise ainda.
  
  // 5. Depois que o tempo de girar, mostre a an√°lise.
  setTimeout(() => {
    loader.style.display = 'none';
    aiBox.style.display = 'block';
    shareButton.style.display = 'flex';
  }, 2000); // 2 segundos ap√≥s o in√≠cio da rota√ß√£o

  // 6. Finalmente, exiba a an√°lise e o bot√£o de compartilhar.
  hasReading = true;
  button.innerText = 'üîÑ Nova Consulta';
  button.className = 'button blue';
  status.textContent = 'Consultando‚Ä¶';
  status.className = 'status-loading';
}


const drawnNames = shuffled.map(c => c.label);
showPrompt(drawnNames);
loader.style.display = 'block';
aiBox.style.display = 'none';
shareButton.style.display = 'none';

 callAuroraAPI(shuffled.map(c => c.label));
  hasReading = true;
  button.innerText = 'üîÑ\u00A0\u00A0\u00A0Nova Consulta';
  button.className = 'action-button blue';
  status.textContent = 'ü§ñ\u00A0\u00A0\u00A0Consultando com IA‚Ä¶';
  status.className = 'status-loading';
}


function showPrompt(drawn) {
const promptBox = document.getElementById('promptBox');
promptBox.style.display = 'block';

}

  function resetReading() {
  imgs.forEach(img => img.src = backCard);
  labels.forEach(l => l.innerText = '');
  promptBox.style.display = 'none';
  aiBox.style.display = 'none';
  shareButton.style.display = 'none';
  loader.style.display = 'none';
  button.innerText = 'üîÆ\u00A0\u00A0\u00A0Embaralhar Cartas';
  button.className = 'button pink';
  status.textContent = 'Aguardando sua consulta';
  status.className = '';
  hasReading = false;
}

 

 <!-- BOT√ÉO DE COMPARTILHAR WHATSAAP -->
function shareOnWhatsApp() {
    // 1. Captura o conte√∫do
    const title = document.querySelector('#aiResponse h2')?.innerText || 'Anora Tar√¥';
    const analysisText = document.querySelector('#aiResponse p')?.innerText || '';

    if (!analysisText) return;

    // 2. Monta a mensagem
    const message = `${title}\n\n${analysisText}\n\n

üîÆ Anora Tar√¥ ‚Äî leitura assistida por IA
‚ö° Powered by Geraldo A. Seabra`;

    // 3. COMUNICA√á√ÉO COM APP INVENTOR (O Pulo do Gato)
    if (window.AppInventor) {
        // Envia o texto para o Bloco "WebViewString" do App Inventor
        window.AppInventor.setWebViewString(message);
    } else {
        // Fallback apenas para teste no PC/Navegador comum
        window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(message)}`, '_blank');
    }
}

  <!-- CHAMA AS CARTAS SELECIONADAS E O CONTE√öDO DO PROMPT -->
async function callAuroraAPI(cardsDrawn) {
try {
const res = await fetch(
'https://aurora-api-final-2025.vercel.app/api/chat',
{
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({
messages: [
{
role: "user",
content: `Fa√ßa uma pequena introdu√ß√£o antes de iniciar a interpreta√ß√£o da sequ√™ncia de cartas. Realize uma an√°lise profunda da situa√ß√£o do consulente, em par√°grafos separados, os significados do passado, do presente e do futuro de forma integrada e, ao final, construa uma s√≠ntese clara, coerente e significativa, conectando os s√≠mbolos revelados ao momento vivido pelo consulente.Analise as tr√™s cartas sorteadas, estruturando sua resposta em quatro par√°grafos distintos. Cada par√°grafo deve ter um t√≠tulo em negrito. Siga exatamente esta estrutura:

**Passado:**
Escreva aqui sua an√°lise sobre a carta ${cardsDrawn[0]} e sua influ√™ncia no passado do consulente.

**Presente:**
Escreva aqui sua an√°lise sobre a carta ${cardsDrawn[1]} e sua influ√™ncia no presente do consulente.

**Futuro:**
Escreva aqui sua an√°lise sobre a carta ${cardsDrawn[2]} e sua influ√™ncia no futuro do consulente.

**An√°lise Final:**
Escreva aqui uma s√≠ntese final, conectando as tr√™s cartas e oferecendo uma orienta√ß√£o clara e integrada para o consulente.`
}
]
})
}
);

console.log('Status da Resposta da API:', res.status);
const data = await res.json();
console.log('Resposta Completa da API:', data);

const analysisText = data.choices[0].message.content || 'A IA n√£o retornou nenhuma an√°lise.';

aiBox.innerHTML = `
  <h2 class="ai-title">
    <img src="cards_images/marca_anora.png" alt="Anora Tar√¥" class="ai-logo">
    Anora Assistente de IA
  </h2>
  <p>${analysisText}</p>
`;

status.textContent = '‚úÖ\u00A0\u00A0\u00A0Consulta realizada com sucesso';
status.className = 'status-success';

} catch (error) {
console.error('Erro na chamada da API:', error);
const errorText = 'Erro ao acessar a reflex√£o.';


  
aiBox.innerHTML = `<h2>Anora Assistente de IA</h2><p>${errorText}</p>`;


status.textContent = 'Erro de carregamento';
status.className = 'status-error';
}

loader.style.display = 'none';
aiBox.style.display = 'block';
shareButton.style.display = 'block';
}

// L√≥gica para esconder o loader da p√°gina
window.addEventListener('load', () => {
setTimeout(() => {
const pageLoader = document.getElementById('pageLoader');
if (pageLoader) {
pageLoader.classList.add('hidden');
}
}, 2000);
});

shareButton.onclick = shareOnWhatsApp;

button.onclick = () => hasReading ? resetReading() : newReading();
</script>

<script>
if ('serviceWorker' in navigator) {
window.addEventListener('load', () => {
navigator.serviceWorker.register('/service-worker.js')
.then(() => console.log('SW registrado'))
.catch(err => console.error('SW erro:', err));
});
}
</script>

</body>
</html>
